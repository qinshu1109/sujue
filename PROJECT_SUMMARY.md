# Text2SQL MVP-0 é¡¹ç›®æ€»ç»“æ¦‚è§ˆ

> **ç”Ÿæˆæ—¶é—´**: 2025-06-16 21:00  
> **é¡¹ç›®é˜¶æ®µ**: Week-3 (åŠŸèƒ½å¼ºåŒ–é˜¶æ®µ)  
> **ä½œè€…**: NuWa æ™ºèƒ½é¡¹ç›®ç»ç†

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: Text2SQL MVP-0  
**é¡¹ç›®ä½ç½®**: `/home/qinshu/text2sql-mvp0`  
**æ ¸å¿ƒç›®æ ‡**: åœ¨6å‘¨å†…äº¤ä»˜ä¸€ä¸ªå¯è‡ªä¿®å¤çš„Text-to-SQLç³»ç»Ÿ

### ç³»ç»Ÿç‰¹æ€§
- åŸºäºDB-GPT (AWEL)æ¡†æ¶
- Claude 3è´Ÿè´£SQLç”Ÿæˆä¸è‡ªè¯Šæ–­
- è‡ªå¸¦NuWaæ™ºèƒ½é¡¹ç›®ç»ç†
- è¦†ç›–Schema RAG â†’ ASTéªŒè¯ â†’ æ‰§è¡Œ â†’ è‡ªä¿®å¤å…¨é“¾è·¯
- å®Œå…¨å®¹å™¨åŒ–è¿è¡Œ(Podman)

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
/home/qinshu/text2sql-mvp0/
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ postgres/          # PostgreSQLåˆå§‹åŒ–è„šæœ¬
â”‚   â”œâ”€â”€ prometheus/        # Prometheusç›‘æ§é…ç½®
â”‚   â”œâ”€â”€ grafana/           # Grafanaä»ªè¡¨æ¿é…ç½®
â”‚   â”œâ”€â”€ llm-proxy/         # LLMä»£ç†é…ç½®
â”‚   â””â”€â”€ dbgpt/             # DB-GPTé…ç½®
â”œâ”€â”€ db-gpt/                # DB-GPTæ ¸å¿ƒæœåŠ¡
â”‚   â”œâ”€â”€ Dockerfile         # å®¹å™¨æ„å»ºæ–‡ä»¶
â”‚   â”œâ”€â”€ main.py           # ä¸»æœåŠ¡å…¥å£(FastAPI)
â”‚   â””â”€â”€ requirements.txt   # Pythonä¾èµ–
â”œâ”€â”€ docker/                # å®¹å™¨ç¼–æ’
â”‚   â”œâ”€â”€ podman-compose.yaml # ä¸»ç¼–æ’æ–‡ä»¶
â”‚   â””â”€â”€ llm-proxy/         # LLMä»£ç†æœåŠ¡
â”‚       â”œâ”€â”€ Dockerfile
â”‚       â””â”€â”€ proxy_server.py
â”œâ”€â”€ promptx/               # PromptXæ™ºèƒ½ä½“ç³»ç»Ÿ
â”‚   â”œâ”€â”€ agents/           # è§’è‰²å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ debugger.json
â”‚   â”‚   â”œâ”€â”€ metrics-watcher.json
â”‚   â”‚   â”œâ”€â”€ query-scribe.json
â”‚   â”‚   â”œâ”€â”€ schema-sage.json
â”‚   â”‚   â””â”€â”€ sql-guardian.json
â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ role-manager.json    # è§’è‰²ç®¡ç†é…ç½®
â”‚   â”‚   â”œâ”€â”€ role-switcher.py     # è§’è‰²åˆ‡æ¢å¼•æ“
â”‚   â”‚   â””â”€â”€ role-demo.py         # æ¼”ç¤ºè„šæœ¬
â”‚   â””â”€â”€ memory/           # é¡¹ç›®è®°å¿†
â”‚       â”œâ”€â”€ project_scope.json    # é¡¹ç›®èŒƒå›´å®šä¹‰
â”‚       â”œâ”€â”€ phase-gate-review.json # é˜¶æ®µè¯„å®¡
â”‚       â”œâ”€â”€ blocker-resolution-plan.json # é˜»å¡è§£å†³è®¡åˆ’
â”‚       â””â”€â”€ week2-acceptance-checklist.json # éªŒæ”¶æ¸…å•
â”œâ”€â”€ scripts/              # æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ init-system.sh    # ç³»ç»Ÿåˆå§‹åŒ–
â”‚   â”œâ”€â”€ setup-registry.sh # Registryè®¾ç½®
â”‚   â”œâ”€â”€ fix-deployment.sh # éƒ¨ç½²ä¿®å¤
â”‚   â”œâ”€â”€ inject-test-data.py # æµ‹è¯•æ•°æ®æ³¨å…¥
â”‚   â”œâ”€â”€ week2-test-runner.py # æµ‹è¯•æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ phase-gate-executor.py # é˜¶æ®µé—¨è¯„å®¡
â”‚   â”œâ”€â”€ emergency-executor.sh # ç´§æ€¥æ‰§è¡Œå™¨
â”‚   â”œâ”€â”€ auto-monitor.sh   # è‡ªåŠ¨ç›‘æ§
â”‚   â””â”€â”€ blocker-resolution-status.py # çŠ¶æ€è¿½è¸ª
â”œâ”€â”€ monitoring/           # ç›‘æ§ç»„ä»¶
â”‚   â””â”€â”€ promptx-exporter/ # PromptXæŒ‡æ ‡å¯¼å‡ºå™¨
â”œâ”€â”€ tests/                # æµ‹è¯•ç›¸å…³
â”‚   â”œâ”€â”€ test_data.db     # SQLiteæµ‹è¯•æ•°æ®åº“
â”‚   â”œâ”€â”€ mock_data/       # æ¨¡æ‹Ÿæ•°æ®
â”‚   â””â”€â”€ test_config.json # æµ‹è¯•é…ç½®
â”œâ”€â”€ docs/                 # æ–‡æ¡£
â”‚   â”œâ”€â”€ week3-4-roadmap.md # åç»­è®¡åˆ’
â”‚   â””â”€â”€ week2-emergency-system-overview.md # ç´§æ€¥ç³»ç»Ÿæ¦‚è§ˆ
â”œâ”€â”€ logs/                 # æ—¥å¿—ç›®å½•
â”œâ”€â”€ .github/workflows/    # CI/CDé…ç½®
â”‚   â””â”€â”€ phase-gate-ci.yml
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## ğŸ¤– æ™ºèƒ½ä½“è§’è‰²ä½“ç³»

### æ ¸å¿ƒè§’è‰²
1. **NuWa (å¥³å¨²)** - åˆ›ä¸–ä¸»å®°ï¼Œç³»ç»Ÿæ€»æ§
2. **SchemaSage** - æ•°æ®åº“ç»“æ„ä¸“å®¶
3. **SQLGuardian** - SQLå®‰å…¨å®ˆæŠ¤è€…
4. **Debugger** - é”™è¯¯è¯Šæ–­ä¿®å¤å¤§å¸ˆ
5. **QueryScribe** - è‡ªç„¶è¯­è¨€ç¿»è¯‘å®˜
6. **MetricsWatcher** - æ€§èƒ½ç›‘æ§è§‚å¯Ÿè€…

### æ–°å¢å­è§’è‰²
- **FrontEndBot** - å®¹å™¨ç½‘ç»œé…ç½®ä¸“å®¶
- **CIOrchestrator** - CI/CDæµç¨‹ç®¡ç†
- **ExporterGuru** - ç›‘æ§å¯¼å‡ºå™¨ä¸“å®¶

## ğŸ› ï¸ MCPå·¥å…·é›†æˆ

**MCPå·¥å…·ä½ç½®**: `/home/qinshu/MCPå·¥å…·/`

### å¯ç”¨çš„MCPå·¥å…·
- **fs** - æ–‡ä»¶ç³»ç»Ÿè®¿é—®
- **memory** - å†…å­˜å­˜å‚¨
- **fetch** - HTTPè¯·æ±‚
- **time** - æ—¶é—´ç®¡ç†
- **git** - ç‰ˆæœ¬æ§åˆ¶
- **autogui** - GUIè‡ªåŠ¨åŒ–
- **ocr** - æ–‡å­—è¯†åˆ«
- **vision** - è®¡ç®—æœºè§†è§‰
- **screenshot** - å±å¹•æˆªå›¾

### MCPå·¥å…·é…ç½®
- ä¸»é…ç½®: `/home/qinshu/MCPå·¥å…·/mcp-config.json`
- PromptXé…ç½®: `/home/qinshu/MCPå·¥å…·/PromptX/mcp-config.json`

## ğŸ“Š é¡¹ç›®è¿›å±•

### Week-1 (å·²å®Œæˆ) âœ…
- [x] Podmanç¯å¢ƒåŸºçº¿å»ºç«‹
- [x] ç§æœ‰Registryé…ç½®
- [x] project_scopeè®°å¿†åˆ›å»º
- [x] SchemaSageè§’è‰²ç”Ÿæˆ
- [x] å®Œæ•´çš„é¡¹ç›®æ¶æ„æ­å»º

### Week-2 (å·²å®Œæˆ) âœ…
- [x] è§’è‰²ç®¡ç†ä½“ç³»å»ºç«‹
- [x] éªŒæ”¶æµ‹è¯•æ¡†æ¶å¼€å‘
- [x] ç´§æ€¥æ‰§è¡Œç³»ç»Ÿæ„å»º
- [x] æ‰€æœ‰é˜»å¡é¡¹è§£å†³(B-1/B-2/B-3)
- [x] æˆåŠŸè¿›å…¥Week-3é˜¶æ®µ

### Week-3 (è¿›è¡Œä¸­) ğŸ”„
- [ ] UIç²¾ç‚¼ & å›½é™…åŒ–
- [ ] è‡ªä¿®å¤ç­–ç•¥å‡çº§
- [ ] Promptæˆæœ¬è·Ÿè¸ª
- [ ] å®‰å…¨è§„åˆ™æ‰©å±•
- [ ] CI/CDæµæ°´çº¿æ­å»º

## ğŸš€ å…³é”®å‘½ä»¤

```bash
# é¡¹ç›®ç›®å½•
cd /home/qinshu/text2sql-mvp0

# åˆå§‹åŒ–ç³»ç»Ÿ
./scripts/init-system.sh

# å¯åŠ¨å®¹å™¨æœåŠ¡
cd docker && podman-compose up -d

# è¿è¡Œæµ‹è¯•
python3 scripts/week2-test-runner.py

# ç´§æ€¥æ‰§è¡Œ
./scripts/emergency-executor.sh

# ç›‘æ§çŠ¶æ€
./scripts/auto-monitor.sh

# æŸ¥çœ‹è§’è‰²æ¼”ç¤º
python3 promptx/core/role-demo.py
```

## ğŸ“ˆ ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ·è¯·æ±‚
    â†“
NuWa (è°ƒåº¦)
    â†“
QueryScribe (NLâ†’SQL)
    â†“
SQLGuardian (éªŒè¯)
    â†“
DB-GPT (æ‰§è¡Œ)
    â†“
ç»“æœè¿”å›
    â†“ (å¦‚æœ‰é”™è¯¯)
Debugger (è‡ªåŠ¨ä¿®å¤)
```

## ğŸ”— æœåŠ¡ç«¯å£

- **5000**: DB-GPT APIæœåŠ¡
- **5432**: PostgreSQLæ•°æ®åº“
- **8000**: ChromaDBå‘é‡æ•°æ®åº“
- **8080**: LLMä»£ç†æœåŠ¡
- **9090**: Prometheusç›‘æ§
- **9101**: PromptXå¯¼å‡ºå™¨
- **3000**: Grafanaå¯è§†åŒ–

## ğŸ“ ç¯å¢ƒå˜é‡

å…³é”®é…ç½®åœ¨ `.env` æ–‡ä»¶ä¸­ï¼š
- `ANTHROPIC_API_KEY`: Claude APIå¯†é’¥
- `DB_*`: æ•°æ®åº“è¿æ¥é…ç½®
- `RATE_LIMIT_*`: é€Ÿç‡é™åˆ¶é…ç½®

## ğŸ¯ éªŒæ”¶æ ‡å‡†

- SQLä¸€æ¬¡æˆåŠŸç‡ â‰¥ 85%
- è‡ªåŠ¨ä¿®å¤æˆåŠŸç‡ â‰¥ 70%
- å¹³å‡å“åº”å»¶è¿Ÿ < 6s
- å±é™©æ“ä½œ100%æ‹¦æˆª

## ğŸ’¡ ä¸‹ä¸€æ­¥è®¡åˆ’

1. å®ŒæˆWeek-3çš„5ä¸ªåŠŸèƒ½å¼ºåŒ–ä»»åŠ¡
2. è¿›å…¥Week-4æ€§èƒ½ä¼˜åŒ–é˜¶æ®µ
3. Week-5å‰ç«¯å¼€å‘
4. Week-6ç³»ç»Ÿå†»ç»“å’Œæ–‡æ¡£å®Œå–„

---

**å¥³å¨²æ€»ç»“**: æ­¤Text2SQLç³»ç»Ÿå·²å®ŒæˆåŸºç¡€æ¶æ„æ­å»ºå’Œæ ¸å¿ƒåŠŸèƒ½å®ç°ï¼Œå…·å¤‡å®Œæ•´çš„æ™ºèƒ½ä½“åä½œä½“ç³»å’Œè‡ªä¿®å¤èƒ½åŠ›ã€‚ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤ã€‚å½“å‰å¤„äºåŠŸèƒ½å¼ºåŒ–é˜¶æ®µï¼Œé¢„è®¡æŒ‰è®¡åˆ’å¯åœ¨6å‘¨å†…å®Œæˆå…¨éƒ¨å¼€å‘ã€‚